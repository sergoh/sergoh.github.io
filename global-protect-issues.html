
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="http://www.devlo.io/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="http://www.devlo.io/theme/pygments/arduino.min.css">



  <link rel="stylesheet" type="text/css" href="http://www.devlo.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="http://www.devlo.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="http://www.devlo.io/theme/font-awesome/css/solid.css">

  <link rel="stylesheet" type="text/css" href="http://www.devlo.io/extra/static/custom.css">

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="theme/favicon.ico" type="image/x-icon">


  <link href="http://www.devlo.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="DevLo Software Blog Atom">


<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-116740360-1', 'auto');
  ga('send', 'pageview');
</script>






 

<meta name="author" content="Miguel Lopez" />
<meta name="description" content="Solving Connectivity Issues on Global Protect" />
<meta name="keywords" content="mac, vpn">


  <meta property="og:site_name" content="DevLo Software Blog"/>
  <meta property="og:title" content="Solving Connectivity Issues w/ Global Protect"/>
  <meta property="og:description" content="Solving Connectivity Issues on Global Protect"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="http://www.devlo.io/global-protect-issues.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2018-04-13 00:00:00-07:00"/>
  <meta property="article:modified_time" content="2018-04-13 00:00:00-07:00"/>
  <meta property="article:author" content="http://www.devlo.io/author/miguel-lopez.html">
  <meta property="article:section" content="tutorials"/>
  <meta property="article:tag" content="mac"/>
  <meta property="article:tag" content="vpn"/>
  <meta property="og:image" content="/images/Devlo-Logo.png">

  <title>DevLo Software Blog &ndash; Solving Connectivity Issues w/ Global Protect</title>


<script>
  (function(w,d,s,l,i){
    w[l]=w[l]||[];
    w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
    var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
    j.async=true;
    j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
    f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-T32GC6Q');
</script>
</head>
<body class="light-theme">
<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T32GC6Q" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>

<aside>
  <div>
    <a href="http://www.devlo.io/">
      <img src="/images/Devlo-Logo.png" alt="" title="">
    </a>

    <h1>
      <a href="http://www.devlo.io/"></a>
    </h1>

    <p>Lopez Brothers Blog</p>

    <div class="authors-profiles">
      <div>
        <figure>
          <img src="http://www.devlo.io/theme/img/miguel.png" alt="Miguel" title="Miguel">
          <figcaption>Miguel</figcaption>
        </figure>
        <ul class="social">
          <li>
            <a class="sc-linkedin"
               href="https://www.linkedin.com/in/lopezm1/"
               target="_blank">
              <i class="fa-brands fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a class="sc-github"
               href="https://github.com/lopezm1"
               target="_blank">
              <i class="fa-brands fa-github"></i>
            </a>
          </li>
        </ul>
      </div>
      <div>
        <figure>
          <img src="http://www.devlo.io/theme/img/sergio.png" alt="Sergio" title="Sergio">
          <figcaption>Sergio</figcaption>
        </figure>
        <ul class="social">
          <li>
            <a class="sc-linkedin"
               href="https://www.linkedin.com/in/sergiolopezjr/"
               target="_blank">
              <i class="fa-brands fa-linkedin"></i>
            </a>
          </li>
          <li>
            <a class="sc-github"
               href="https://github.com/sergoh"
               target="_blank">
              <i class="fa-brands fa-github"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>



    <nav>
      <ul class="list">


            <li>
              <a target="_self"
                 href="http://www.devlo.io/pages/about.html">
                About
              </a>
            </li>

      </ul>
    </nav>

  </div>

</aside>
  <main>

<nav>
  <a href="http://www.devlo.io/">Home</a>

  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>

  <a href="http://www.devlo.io/feeds/all.atom.xml">Atom</a>

</nav>

<article class="single">
  <header>
      
    <h1 id="global-protect-issues">Solving Connectivity Issues w/ Global Protect</h1>
    <p>
      Posted by <a href="http://www.devlo.io/author/miguel-lopez.html">Miguel Lopez</a> on Fri 13 April 2018 in <a href="http://www.devlo.io/category/tutorials.html">tutorials</a>

    </p>
  </header>


  <div>
    <h2><strong>Resend Credential Error</strong></h2>
<p>I recently got a new Mac at work and spent the past 8 hours trying to solve connectivity issues with Global Protect.</p>
<p>My global protect would throw out this generic error that said:</p>
<div class="highlight"><pre><span></span><code><span class="nv">Resend</span> <span class="nv">Credential</span>

<span class="nv">Cannot</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">service</span> <span class="nv">socket</span>
</code></pre></div>

<p>I was able to poke around and find the logs for this issue at <code>~/Library/Logs/PaloAltoNetworks/GlobalProtect/PanGPA.log</code>.</p>
<p>I ran a <code>tail -f</code> on that log and found the following trace:</p>
<div class="highlight"><pre><span></span><code><span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">42</span>:<span class="mi">225745</span> <span class="nv">Info</span> <span class="ss">(</span> <span class="mi">291</span><span class="ss">)</span>: <span class="nv">InitConnection</span> ...
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">42</span>:<span class="mi">225785</span> <span class="nv">Info</span> <span class="ss">(</span>  <span class="mi">59</span><span class="ss">)</span>: <span class="nv">fd</span> <span class="nv">still</span> <span class="nv">open</span> <span class="nv">before</span> <span class="k">connect</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">42</span>:<span class="mi">225988</span> <span class="nv">Info</span> <span class="ss">(</span>  <span class="mi">80</span><span class="ss">)</span>: <span class="nv">Failed</span> <span class="nv">to</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">server</span> <span class="nv">at</span> <span class="nv">port</span>:<span class="mi">4767</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">42</span>:<span class="mi">226004</span> <span class="nv">Info</span> <span class="ss">(</span> <span class="mi">295</span><span class="ss">)</span>: <span class="nv">Cannot</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">service</span>, <span class="nv">error</span>: <span class="mi">61</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">42</span>:<span class="mi">226010</span> <span class="nv">Debug</span><span class="ss">(</span> <span class="mi">474</span><span class="ss">)</span>: <span class="nv">Unable</span> <span class="nv">to</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">Pan</span> <span class="nv">Service</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">47</span>:<span class="mi">225540</span> <span class="nv">Info</span> <span class="ss">(</span> <span class="mi">291</span><span class="ss">)</span>: <span class="nv">InitConnection</span> ...
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">47</span>:<span class="mi">225581</span> <span class="nv">Info</span> <span class="ss">(</span>  <span class="mi">59</span><span class="ss">)</span>: <span class="nv">fd</span> <span class="nv">still</span> <span class="nv">open</span> <span class="nv">before</span> <span class="k">connect</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">47</span>:<span class="mi">225782</span> <span class="nv">Info</span> <span class="ss">(</span>  <span class="mi">80</span><span class="ss">)</span>: <span class="nv">Failed</span> <span class="nv">to</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">server</span> <span class="nv">at</span> <span class="nv">port</span>:<span class="mi">4767</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">47</span>:<span class="mi">225799</span> <span class="nv">Info</span> <span class="ss">(</span> <span class="mi">295</span><span class="ss">)</span>: <span class="nv">Cannot</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">service</span>, <span class="nv">error</span>: <span class="mi">61</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">47</span>:<span class="mi">225805</span> <span class="nv">Debug</span><span class="ss">(</span> <span class="mi">474</span><span class="ss">)</span>: <span class="nv">Unable</span> <span class="nv">to</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">Pan</span> <span class="nv">Service</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">52</span>:<span class="mi">226040</span> <span class="nv">Info</span> <span class="ss">(</span> <span class="mi">291</span><span class="ss">)</span>: <span class="nv">InitConnection</span> ...
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">52</span>:<span class="mi">226069</span> <span class="nv">Info</span> <span class="ss">(</span>  <span class="mi">59</span><span class="ss">)</span>: <span class="nv">fd</span> <span class="nv">still</span> <span class="nv">open</span> <span class="nv">before</span> <span class="k">connect</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">52</span>:<span class="mi">226206</span> <span class="nv">Info</span> <span class="ss">(</span>  <span class="mi">80</span><span class="ss">)</span>: <span class="nv">Failed</span> <span class="nv">to</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">server</span> <span class="nv">at</span> <span class="nv">port</span>:<span class="mi">4767</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">52</span>:<span class="mi">226218</span> <span class="nv">Info</span> <span class="ss">(</span> <span class="mi">295</span><span class="ss">)</span>: <span class="nv">Cannot</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">service</span>, <span class="nv">error</span>: <span class="mi">61</span>
<span class="nv">P</span> <span class="mi">595</span><span class="o">-</span><span class="nv">T771</span>   <span class="nv">Apr</span> <span class="mi">10</span> <span class="mi">20</span>:<span class="mi">40</span>:<span class="mi">52</span>:<span class="mi">226223</span> <span class="nv">Debug</span><span class="ss">(</span> <span class="mi">474</span><span class="ss">)</span>: <span class="nv">Unable</span> <span class="nv">to</span> <span class="k">connect</span> <span class="nv">to</span> <span class="nv">Pan</span> <span class="nv">Service</span>
</code></pre></div>

<p>Over and over again.</p>
<p>As it turns out, this was because Global Protect could not connect to an agent called the pangps service. You can check if this service is loaded by running the following command in your terminal.</p>
<div class="highlight"><pre><span></span><code><span class="n">launchctl</span> <span class="nb">load</span> <span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">LaunchAgents</span><span class="o">/</span><span class="n">com</span><span class="o">.</span><span class="n">paloaltonetworks</span><span class="o">.</span><span class="n">gp</span><span class="o">.</span><span class="n">pangpa</span><span class="o">.</span><span class="n">plist</span>
<span class="n">launchctl</span> <span class="nb">load</span> <span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">LaunchAgents</span><span class="o">/</span><span class="n">com</span><span class="o">.</span><span class="n">paloaltonetworks</span><span class="o">.</span><span class="n">gp</span><span class="o">.</span><span class="n">pangps</span><span class="o">.</span><span class="n">plist</span>
</code></pre></div>

<p>If you're ~lucky~ like me, you'll see that the service is running. So what the hell right? Why isn't Pan Service working???</p>
<hr>
<p>As it turns out, I needed to <strong>install Global Protect as the root admin</strong> on my Mac. This is incredibly <strong>frustrating</strong> because my user already had the admin role associated with it. </p>
<p>Before you reinstall, it's important that you allow your mac to allow 3rd party apps to run. </p>
<p>You can find this under "Security and Privacy". You'll need to show Advanced settings and click Allow Apps Downloaded from "Anywhere"</p>
<ol>
<li>Uninstall Global Protect</li>
<li>Log in as the admin user</li>
<li>Reinstall Global Protect</li>
</ol>
<p>Once you reinstall, head back over to the "Security and Privacy" settings. You'll see a prompt that asks if Global Protect is allowed to run on this machine. Click yes. </p>
<p><img alt="Security and Privacy" src="http://cdn.osxdaily.com/wp-content/uploads/2016/09/gatekeeper-allow-apps-anywhere-macos-2.jpg" title="Security and Privacy"></p>
<p>By this point you should able to connect to Global Protect. If not, i'm sorry. Best of luck :(</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://www.devlo.io/tag/mac.html">mac</a>
      <a href="http://www.devlo.io/tag/vpn.html">vpn</a>
    </p>
  </div>






</article>

<footer>
<p>&copy;  </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " DevLo Software Blog ",
  "url" : "http://www.devlo.io",
  "image": "/images/Devlo-Logo.png",
  "description": "DevLo - Software Blog."
}
</script>
</body>
</html>